<!DOCTYPE html>
<html>
  <head><title>ManageUsers</title></head>
  <body>
    <form action = "/api/user" method = "GET" >
      <input type = "submit" value = "Get All Users Details"/>
    </form><br/>

    id : <input type = "text" id = "id1"></input> 
    <button onclick = "loadDoc()"> Get Single user Details </button><br/>
    name : <input type = "text" id = "name1"></input><br/>
    age : <input type = "number" id = "age1"></input><br/>
    <button onclick = "addUser()">Add User</button><br/>

    id: <input type = "text" id = "id2"></input></br>
    name: <input type = "text" id = "name"></input></br>
    age: <input type = "text" id = "age"></input></br>
    <button onclick = "updateUser()">Update User</button>
    <br/>

    id:<input type = "text" id = "id3"></input>
    <button onclick = "deleteUser()">Delete User</button>

    <script>
      function loadDoc(){
        let xhttp = new XMLHttpRequest();
        let url = '/api/user/'+document.getElementById('id1').value;
        xhttp.open('GET',url,true);
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            alert(this.responseText);
          }
        };
        xhttp.send();
      };
      function updateUser() {
        let xhttp = new XMLHttpRequest();
        let url = "/api/user/"+document.getElementById("id2").value;
        xhttp.open('PUT', url, true);
        xhttp.setRequestHeader('Content-type', 'application/json');
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            alert(this.responseText);
          }
        };
        xhttp.send(JSON.stringify({
          name : document.getElementById("name").value,
          age : document.getElementById("age").value
        }));
      };
      function addUser(){
        let xhttp = new XMLHttpRequest();
        let url = "/api/user";
        xhttp.open('POST', url, true);
        xhttp.setRequestHeader('Content-type', 'application/json');
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            alert(this.responseText);
          }
        };
        xhttp.send(JSON.stringify({
          name : document.getElementById("name1").value,
          age : document.getElementById("age1").value
        }));
      };
      function deleteUser() {
        let xhttp = new XMLHttpRequest();
        let url = "/api/user/"+document.getElementById("id3").value;
        console.log(url);
        xhttp.open('DELETE', url, true);
        xhttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            alert(this.responseText);
          }
        };
        xhttp.send();
      };
    </script>
  </body>
</html>